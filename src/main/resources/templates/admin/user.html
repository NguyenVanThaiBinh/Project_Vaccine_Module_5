<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head th:insert="/layout/header::header">

</head>
<body class="boxed-layout">
<div>
    <!-- partial:../../partials/_navbar.html -->
    <nav class="navbar col-lg-12 col-12 p-0">
        <div>
            <a href="/">
                <img style="width: 100%;"
                     alt="virus corona 2019"
                     class="img-responsive hidden-xs"
                     src="https://vnvc.vn/wp-content/uploads/2021/06/virus-corona-covid-19-pc.jpg"
                />
            </a>
        </div>
    </nav>
    <!-- partial -->
    <div class="container-fluid page-body-wrapper">
        <a href="/logout"><button class="btn btn-primary buttonout">Đăng xuất</button></a>
        <div class="row row-offcanvas row-offcanvas-right">
            <div class="theme-setting-wrapper">
                <div id="settings-trigger">
                    <i class="mdi mdi-settings"></i>
                </div>
                <div id="theme-settings" class="settings-panel">
                    <i class="settings-close mdi mdi-close"></i>
                    <p class="settings-heading">SIDEBAR SKINS</p>
                    <div
                            class="sidebar-bg-options selected"
                            id="sidebar-light-theme"
                    >
                        <div
                                class="
                                        img-ss
                                        rounded-circle
                                        bg-light
                                        border
                                        mr-3
                                    "
                        ></div>
                        Light
                    </div>
                    <div
                            class="sidebar-bg-options"
                            id="sidebar-dark-theme"
                    >
                        <div
                                class="
                                        img-ss
                                        rounded-circle
                                        bg-dark
                                        border
                                        mr-3
                                    "
                        ></div>
                        Dark
                    </div>
                    <p class="settings-heading mt-2">HEADER SKINS</p>
                    <div class="color-tiles mx-0 px-4">
                        <div class="tiles primary"></div>
                        <div class="tiles success"></div>
                        <div class="tiles warning"></div>
                        <div class="tiles danger"></div>
                        <div class="tiles pink"></div>
                        <div class="tiles info"></div>
                        <div class="tiles dark"></div>
                        <div class="tiles default"></div>
                    </div>
                </div>
            </div>
            <footer th:replace="/layout/footer">
            </footer>
            <div class="content-wrapper">
                <!--              -------------------------------------------------------  table-------------------------------------------------------->

                <div class="row grid-margin">
                    <div class="col-12">
                        <div class="card">
                            <div class="card-body">
                                <h3 style="    font-weight: 500; color: #006699; text-transform: uppercase; padding: 0 10px" class="card-title">Danh sách khách hàng</h3>
                                <div class="d-flex table-responsive">
                                    <select id="select" onchange="select()" th:object="${destinations}" class="form-control d-flex" style="width: 25%">
                                        <option value="0">Select</option>
                                        <option th:each="d:${destinations}" th:value="${d.id}" th:text="${d.getDestination_name()}"></option>
                                    </select>
                                    <div class="btn-group ml-auto mr-2 border-0">
                                        <input id="search" type="text" class="form-control" placeholder="Search By CMND"/>
                                    </div>
                                </div>
                                <div class="table-responsive">
                                    <input type="hidden" id="page" th:value="${pageActive}">
                                    <table class="table mt-3 border-top" id="customerList">
                                        <thead>
                                        <tr>
                                            <td>Id</td>
                                            <td>Tên </td>
                                            <td>CMND</td>
                                            <td>Điểm tiêm </td>
                                            <td>Ngày Giờ tiêm </td>
                                            <td>Vaccine</td>
                                            <td>Tình trạng</td>
                                            <td></td>
                                        </tr>
                                        </thead>
                                        <tbody>
                                        <th:block th:each="u : ${customers}">
                                            <tr th:id="'row'+${u.id}">
                                                <td th:text="${u.id}"></td>
                                                <td th:text="${u.customer_name}"></td>
                                                <td th:text="${u.CMND}"></td>
                                                <td th:text="${u.destination.getDestination_name()}"></td>
                                                <th:block th:if="${u.isInjection2<=0}">
                                                    <td th:text="${u.date_vaccine}+' -  '+${u.time_vaccine}"></td>
                                                </th:block>
                                                <th:block th:if="${u.isInjection2>0}">
                                                    <td>
                                                        <th:block style="font-size: 1rem;" th:text="${u.date_vaccine}+' -  '+${u.time_vaccine}"></th:block>
                                                        <br>
                                                        <th:block style="font-size: 1rem;" th:text="${u.date_vaccine2}+' -  '+${u.time_vaccine2}"></th:block>
                                                    </td>
<!--                                                    <td th:text="${u.date_vaccine}+' -  '+${u.time_vaccine}+'<br>'+${u.date_vaccine2}+' -  '+${u.time_vaccine2}"></td>-->
                                                </th:block>
                                                <td th:text="${u.vaccine.getVaccine_name()}"></td>
                                                <td>
                                                    <th:block th:if="${u.isInjection==1}">
                                                        <th:block th:if="${u.isInjection2!=3}">
                                                            <i class="fas fa-check"></i>
                                                        </th:block>
                                                        <th:block th:if="${u.isInjection2==3}">
                                                            <i class="fas fa-check-double"></i>
                                                        </th:block>
                                                    </th:block>
                                                </td>
                                                <td>
                                                    <button type="button" class="btn btn-success edit"
                                                            data-toggle="modal" data-target="#exampleModal"
                                                            data-whatever="@mdo">Edit
                                                    </button>
                                                    <input type="hidden" id="idU" th:value="${u.id}">
                                                </td>
                                            </tr>
                                        </th:block>
                                        </tbody>
                                    </table>
                                    <!--                         <--------------------------------- modal-bootraps----------------------------------->
                                    <div class="modal fade" id="exampleModal" tabindex="-1"
                                         aria-labelledby="exampleModalLabel" aria-hidden="true">
                                        <div class="modal-dialog">
                                            <div class="modal-content">
                                                <div class="modal-header">
                                                    <h5 class="modal-title" id="exampleModalLabel">Chỉnh sửa thông tin khách hàng<span
                                                            id="exampleModalLabelSpan"></span></h5>
                                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                                        <span aria-hidden="true">&times;</span>
                                                    </button>
                                                </div>
                                                <div class="modal-body">
                                                    <form role="form" id="registration">
                                                        <div class="md-6">
                                                            <label class="form-label">Tên khách hàng</label>
                                                            <input th:type="text" class="form-control" id="edName"
                                                                   name="upName">
                                                        </div>
                                                        <div class="md-6">
                                                            <label class="col-form-label">Số CMND:</label>
                                                            <input type="text" class="form-control" id="edCMND"
                                                                   name="upEmail">
                                                        </div>
                                                        <div class="md-6">
                                                            <label class="col-form-label">Email</label>
                                                            <input type="text" class="form-control" id="edEmail"
                                                                   name="upPhone">
                                                        </div>
                                                        <div class="md-6">
                                                            <label class="col-form-label">Số điện thoại</label>
                                                            <input type="text" class="form-control" id="edPhone"
                                                                   name="upAddress">
                                                        </div>
                                                        <input type="hidden" id="edId">
                                                        <input type="hidden" id="edPage">
                                                    </form>
                                                </div>
                                                <div class="modal-footer">
                                                    <button type="button" class="btn btn-secondary close-modal" data-dismiss="modal">Close</button>
                                                    <button type="button" class="btn btn-primary" onclick="editUser()">Send message</button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <!--                         <--------------------------------- modal-bootraps----------------------------------->
                                </div>
                                <div
                                        class="
                                                d-flex
                                                align-items-center
                                                justify-content-between
                                                flex-column flex-sm-row
                                                mt-4
                                            "
                                >
                                    <p class="mb-3 mb-sm-0" id="infoPage">
                                    </p>
                                    <nav id="nav" style="padding: 0 20px;">
                                        <ul class="pagination pagination-info mb-0" th:if="${list.size()>1}">
                                            <li th:each="number: ${list}" th:class="${pageActive==numberStat.index}?'page-item active':'page-item'">
                                                <a class="page-link" th:onclick="'javascript:select('+${numberStat.index}+')'" th:text="${numberStat.index + 1}"></a>
                                            </li>
                                        </ul>
                                    </nav>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <footer class="footer">
                    <div class="container-fluid clearfix">
                                <span
                                        class="
                                        text-muted
                                        d-block
                                        text-center text-sm-left
                                        d-sm-inline-block
                                    "
                                >Copyright © 2017 <a href="#">Vaccine</a>.
                                    All rights reserved.</span
                                >
                        <span
                                class="
                                        float-none float-sm-right
                                        d-block
                                        mt-1 mt-sm-0
                                        text-center
                                    "
                        >Hand-crafted & made with
                                    <i class="mdi mdi-heart text-danger"></i
                                    ></span>
                    </div>
                </footer>
                <!-- partial -->
            </div>
            <!-- content-wrapper ends -->
        </div>
        <!-- row-offcanvas ends -->
    </div>
    <!-- page-body-wrapper ends -->
</div>
<script src="/webjars/jquery/3.5.1/jquery.min.js"></script>
<script src="/webjars/bootstrap/4.6.0/js/bootstrap.min.js"></script>
<script th:src="@{/js/admin/user.js}"></script>
</body>
</html>
